
<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  

  <title>Pa55w0rd &#39;s Blog</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="信息安全">
<meta property="og:type" content="website">
<meta property="og:title" content="Pa55w0rd &#39;s Blog">
<meta property="og:url" content="http://www.pa55w0rd.club/page/6/index.html">
<meta property="og:site_name" content="Pa55w0rd &#39;s Blog">
<meta property="og:description" content="信息安全">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Pa55w0rd &#39;s Blog">
<meta name="twitter:description" content="信息安全">

  

  


  


  



  
    <link rel="alternative" href="/atom.xml" title="Pa55w0rd &#39;s Blog" type="application/atom+xml">
  


  
    <link rel="icon" href="/img/favicon.ico">
  


  <link rel="stylesheet" href="/css/style.css">
  <!-- <link href="/css/show.ua.css" rel="stylesheet" type="text/css" > -->
  <link href="http://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <!--[if lt IE 9]><script src="//cdn.bootcss.com/html5shiv/r29/html5.min.js"></script><![endif]-->
  <!-- <link href="/vendors/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" /> -->

  <link href="/vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

  <script src="/js/ua-parser.min.js" type="text/javascript"></script>
  <script src="/js/jquery.js" type="text/javascript"></script>
  <script src="/js/jquery.min.js" type="text/javascript"></script>
  <script src="/js/scrollReveal.js" type="text/javascript"></script>
  <script src="http://cdn.bootcss.com/instantsearch.js/1.5.1/instantsearch.js"></script>
  <script src="/js/algolia-search.js" type="text/javascript"></script>
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> -->
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>
  
  






  
  
  <!-- 
  
  
  
  
   -->

  <script>
   var CONFIG = {
    root: '/',
    algolia: {
          applicationID: "",
          apiKey: "",
          adminApiKey: "",
          indexName: "",
          hits: {"per_page":10},
          labels: {"input_placeholder":"搜索...","hits_empty":"未发现与 「${query}」相关的内容","hits_stats":"${hits} 条相关条目，使用了 ${time} 毫秒"}
        }
  };
  </script>

</head>


</html>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div data-scroll-reveal="enter top" id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Pa55w0rd &#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">记录</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/"><i class="fa fa-home" aria-hidden="true"></i>首页</a>
        
          <a class="main-nav-link" href="/archives"><i class="fa fa-archive" aria-hidden="true"></i>归档</a>
        
          <a class="main-nav-link" href="/about"><i class="fa fa-about" aria-hidden="true"></i>about</a>
        
          <a class="main-nav-link" href="/categories"><i class="fa fa-categories" aria-hidden="true"></i>Categories</a>
        
          <a class="main-nav-link" href="/tags"><i class="fa fa-tags" aria-hidden="true"></i>标签</a>
        
          <a class="main-nav-link" href="/about"><i class="fa fa-user" aria-hidden="true"></i>关于我</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><i class="fa fa-rss" aria-hidden="true"></i></a>
        
        <a id="nav-search-btn" class="nav-icon popup-trigger" title="Search"><i class="fa fa-search" aria-hidden="true"></i></a>
      </nav>
        <div id="local-search-input"></div>
      <!-- 百度搜索 -->
     <!-- <div id="search-form-wrap">
        <form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="www.pa55w0rd.club">
        </form>
      </div>
      -->
   
    </div>
  </div>
</header>

    <div class="outer">
      <section id="main">
  
    <article id="post-centos7安装docker" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div data-scroll-reveal="enter top and over 0.7s" class="article-meta">
    <a href="/centos7安装docker/" class="article-date">
  <i class="fa fa-calendar"></i>
  <time datetime="2018-10-18T02:40:11.000Z" itemprop="datePublished">2018-10-18</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/note/">note</a>
  </div>


  </div>
  <div class="article-inner">
    
    

      <header class="article-header">

        
  
    <h1 itemprop="name">
      <a class="article-title" href="/centos7安装docker/">
        <i class="fa fa-pencil-square-o  article-title-icon"></i>centos7 安装docker</a>
    </h1>
  



      </header>
    
    <div class="article-entry" itemprop="articleBody">
      

        <br>
        <span id="busuanzi_container_page_pv">
          阅读次数<span id="busuanzi_value_page_pv"></span>
        </span>
        <ul>
<li>目录<br>{:toc}</li>
</ul>
<h2 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h2><p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</p>
<p>Docker从1.13版本之后采用时间线的方式作为版本号，分为社区版CE和企业版EE。</p>
<p>社区版是免费提供给个人开发者和小型团体使用的，企业版会提供额外的收费服务，比如经过官方测试认证过的基础设施、容器、插件等。</p>
<p>社区版按照stable和edge两种方式发布，每个季度更新stable版本，如17.06，17.09；每个月份更新edge版本，如17.09，17.10。</p>
<p>Docker里比较重要的概念有<strong>注册服务器、仓库、镜像、容器</strong>。</p>
<p><strong>仓库</strong>： 注册服务器是存放仓库的地方，其上往往存放着多个仓库。每个仓库集中存放某一类镜像，往往包括多个镜像文件，通过不同的标签（tag）来进行区分。例如存放Ubuntu操作系统镜像的仓库，称为Ubuntu仓库，其中可能包括14.04、12.04等不同版本的镜像。</p>
<p><strong>镜像</strong>： Docker镜像（Image）类似于虚拟机镜像，可以将它理解为一个面向Docker引擎的只读模板，包含了文件系统。例如：一个镜像可以只包含一个完整的Ubuntu操作系统环境，可以把它称为一个Ubuntu镜像。</p>
<p><strong>容器</strong>： 容器是从镜像创建的应用运行实例，可以将其启动、开始、停止、删除，而这些容器都是相互隔离、互不可见的。可以从一个镜像创建无数个容器。平时我们主要操作的就是容器。我们也可以把容器打包成镜像以方便再次使用。镜像自身是只读的。容器从镜像启动的时候，Docker会在镜像的最上层创建一个可写层，镜像本身将保持不变。</p>
<h2 id="0x01-安装docker"><a href="#0x01-安装docker" class="headerlink" title="0x01 安装docker"></a>0x01 安装docker</h2><ol>
<li><p>Docker 要求64位。并且当CentOS7时你的内核必须不小于3.10，查看你的CentOS 版本是否支持 Docker 。</p>
<p> 查看当前的内核版本</p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="selector-tag">uname</span> <span class="selector-tag">-r</span></span><br><span class="line">3<span class="selector-class">.10</span><span class="selector-class">.0-693</span><span class="selector-class">.21</span><span class="selector-class">.1</span><span class="selector-class">.el7</span><span class="selector-class">.x86_64</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 root 权限登录 Centos。确保 yum 包更新到最新。</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># yum -y update</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>安装和启动docker</p>
<p> centos7 支持使用yum安装，省事很多</p>
 <figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># yum install -y docker</span></span><br><span class="line"><span class="meta"># systemctl start docker</span></span><br><span class="line"><span class="meta"># systemctl enable docker</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>验证是否安装成功</p>
 <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker version</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Client:</span></span><br><span class="line"><span class="attr"> Version:</span>         <span class="number">1.13</span><span class="number">.1</span></span><br><span class="line"> <span class="string">API</span> <span class="attr">version:</span>     <span class="number">1.26</span></span><br><span class="line"> <span class="string">Package</span> <span class="attr">version:</span> <span class="string">docker-1.13.1-75.git8633870.el7.centos.x86_64</span></span><br><span class="line"> <span class="string">Go</span> <span class="attr">version:</span>      <span class="string">go1.9.4</span></span><br><span class="line"> <span class="string">Git</span> <span class="attr">commit:</span>      <span class="number">8633870</span><span class="string">/1.13.1</span></span><br><span class="line"><span class="attr"> Built:</span>           <span class="string">Fri</span> <span class="string">Sep</span> <span class="number">28</span> <span class="number">19</span><span class="string">:45:08</span> <span class="number">2018</span></span><br><span class="line"> <span class="string">OS/Arch:</span>         <span class="string">linux/amd64</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Server:</span></span><br><span class="line"><span class="attr"> Version:</span>         <span class="number">1.13</span><span class="number">.1</span></span><br><span class="line"> <span class="string">API</span> <span class="attr">version:</span>     <span class="number">1.26</span> <span class="string">(minimum</span> <span class="string">version</span> <span class="number">1.12</span><span class="string">)</span></span><br><span class="line"> <span class="string">Package</span> <span class="attr">version:</span> <span class="string">docker-1.13.1-75.git8633870.el7.centos.x86_64</span></span><br><span class="line"> <span class="string">Go</span> <span class="attr">version:</span>      <span class="string">go1.9.4</span></span><br><span class="line"> <span class="string">Git</span> <span class="attr">commit:</span>      <span class="number">8633870</span><span class="string">/1.13.1</span></span><br><span class="line"><span class="attr"> Built:</span>           <span class="string">Fri</span> <span class="string">Sep</span> <span class="number">28</span> <span class="number">19</span><span class="string">:45:08</span> <span class="number">2018</span></span><br><span class="line"> <span class="string">OS/Arch:</span>         <span class="string">linux/amd64</span></span><br><span class="line"><span class="attr"> Experimental:</span>    <span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>测试docker是否正常运行</p>
 <figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run hello-world</span></span><br><span class="line"></span><br><span class="line">Hello <span class="keyword">from</span> Docker!</span><br><span class="line">This message shows <span class="keyword">that</span> your installation appears <span class="keyword">to</span> be working correctly.</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="0x02-使用docker"><a href="#0x02-使用docker" class="headerlink" title="0x02 使用docker"></a>0x02 使用docker</h2><ol>
<li><p>常用命令</p>
 <figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找并拉取镜像</span></span><br><span class="line">docker search ubuntu</span><br><span class="line">docker pull ubuntu</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有可用镜像</span></span><br><span class="line">docker images -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除镜像</span></span><br><span class="line">docker rmi 容器ID </span><br><span class="line">    -f强制删除</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导出导入</span></span><br><span class="line">docker save -o ubuntu_latest.tar ubuntu<span class="function">:latest</span></span><br><span class="line">docker load <span class="params">--input</span> ubuntu_latest.tar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从镜像中创建容器(每运行一次便创建一个新的容器)</span></span><br><span class="line">docker run image</span><br><span class="line">&gt; docker run ubuntu <span class="keyword">echo</span> 'hellp world'  运行一个新的容器，并执行命令<span class="keyword">echo</span></span><br><span class="line"></span><br><span class="line">&gt; docker run -it <span class="params">--name</span> test ubuntu <span class="string">/bin/bash</span> 以交互式终端运行一个新的容器，镜像ubuntu,使用bash，容器别名test</span><br><span class="line">    -i 交互式界面，默认是<span class="literal">false</span></span><br><span class="line">    -t 伪终端，默认<span class="literal">false</span></span><br><span class="line">    <span class="params">--name</span> 容器别名，默认随机命名</span><br><span class="line">    -p 对外端口：docker内部端口</span><br><span class="line"></span><br><span class="line">    进入镜像内部操作</span><br><span class="line">    docker exec -it 容器别名 <span class="string">/bin/bash</span><span class="params">(镜像shell地址)</span></span><br><span class="line"></span><br><span class="line">    exit 退出交互式界面，容器停止运行</span><br><span class="line">    crtl + P 或Q推出交互式界面，容器在后台运行（PQ大写）</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看容器</span></span><br><span class="line">docker ps 查看正在运行的容器</span><br><span class="line">docker ps -a 查看所有容器</span><br><span class="line">docker ps -l 查看最近一次运行的容器</span><br><span class="line"></span><br><span class="line"><span class="comment"># 其他操作</span></span><br><span class="line">docker create 容器名或容器ID 创建容器</span><br><span class="line">docker start 容器名 启动容器</span><br><span class="line">docker run 容器名或容器ID 进入容器，相当于dcoker create + docker start</span><br><span class="line">docker attach 容器名或容器ID 进入容器的命令行</span><br><span class="line">docker stop 容器名 停止容器</span><br><span class="line">docker rm 容器名  删除容器（删除时必须是停止状态）</span><br><span class="line">docker top 容器名 查看容器的进程</span><br><span class="line">docker inspect 容器名 查看docker的底层信息</span><br><span class="line">docker commit 临时名 镜像名  保存镜像</span><br><span class="line"></span><br><span class="line">将主机<span class="string">/www/jy</span> 目录拷贝到容器aaa923a806ca的<span class="string">/www</span>目录下</span><br><span class="line">docker cp <span class="string">/www/jy</span> aaa923a806ca:<span class="string">/www/</span></span><br><span class="line">将主机<span class="string">/www/jy</span> 目录拷贝到容器aaa923a806ca中，目录重命名www</span><br><span class="line">docker cp <span class="string">/www/jy</span> aaa923a806ca:<span class="string">/www</span></span><br><span class="line">将容器aaa923a806ca的<span class="string">/www</span>目录拷贝到主机的<span class="string">/tmp</span>目录</span><br><span class="line">docker cp aaa923a806ca:<span class="string">/www</span> <span class="string">/tmp/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>守护式容器</p>
<p> 我们可以使用守护式容器运行一个或者多个服务，例如运行lamp服务、redis服务、mysql服务等。</p>
<ul>
<li>能够长期运行</li>
<li>没有交互式会话</li>
<li><p>适合运行应用程序和服务</p>
<p>启动守护式容器<br><br><code>docker run -d image</code><br><br>-d 让容器在后台运行</p>
<p>查看守护进行的运行状况<br><br><code>docker logs [-f] [-t] [--tail] 容器名或id</code><br><br>查看容器内WEB应用程序日志</p>
</li>
<li>-f –follow=true|false,默认false,一直跟随log变化</li>
<li>-t –timestamps=true|false,默认false,加上时间戳</li>
<li><p>–tail=”all”,返回最新多少条日志</p>
<p>在容器中启动新的进程<br><br><code>docker exec [-d] [-i] [-t] 容器名 [COMMOND] [ARG...]</code></p>
<p>停止守护式进程<br><br><code>docker stop 容器名</code>      发送停止信号，等待关闭<br><br><code>docker kill 容器名</code>     直接关闭容器</p>
</li>
</ul>
</li>
</ol>
<h2 id="0x03-Nginx部署示例"><a href="#0x03-Nginx部署示例" class="headerlink" title="0x03 Nginx部署示例"></a>0x03 Nginx部署示例</h2><pre><code><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建映射端口为80的交互式界面：</span></span><br><span class="line">docker <span class="builtin-name">run</span> -p 80 --name web -i -t ubuntu /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一次使用更新源</span></span><br><span class="line">apt-<span class="builtin-name">get</span> update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装nginx</span></span><br><span class="line">apt-<span class="builtin-name">get</span> install nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装vim</span></span><br><span class="line">apt-<span class="builtin-name">get</span> install vim</span><br><span class="line"></span><br><span class="line">whereis nginx</span><br><span class="line">nginx: /usr/sbin/nginx /etc/nginx /usr/share/nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置文件</span></span><br><span class="line">vim /etc/nginx/conf.d/localhost.conf</span><br><span class="line"></span><br><span class="line">   <span class="built_in"> server </span>&#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   /var/www/; </span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;   </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个新目录</span></span><br><span class="line">mkdir -p /var/www/</span><br><span class="line">vim /var/www/index.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动nginx</span></span><br><span class="line">nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用Crtl+P(即Crtl+shift+p)退出容器，并后台运行。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 </span></span><br><span class="line">docker<span class="built_in"> port </span>web</span><br><span class="line">docker top web</span><br></pre></td></tr></table></figure>
</code></pre><h2 id="0x04-镜像加速器"><a href="#0x04-镜像加速器" class="headerlink" title="0x04 镜像加速器"></a>0x04 镜像加速器</h2><pre><code>某些原因，需要使用加速器&lt;br&gt;
`https://dev.aliyun.com/`

登陆进入管理控制台就能看到了，按照操作文档进行加速器设置
</code></pre>
      

    </div>





    <footer class="article-footer">
      
        <a data-url="http://www.pa55w0rd.club/centos7安装docker/" data-id="cjop6cq7s000mntt6o8bchm4k" class="article-share-link" data-share="baidu" data-title="centos7 安装docker">分享到</a>
      

      
        <a href="http://www.pa55w0rd.club/centos7安装docker/#gitalk-container" class="article-comment-link">评论</a>
      

      

    </footer>
  </div>
  
</article>
<!--
<div class="share-component" data-disabled="" data-description="Share.js - 一键分享到微博，QQ空间，腾讯微博，人人，豆瓣">一键分享</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
-->







  
    <article id="post-刷短信接口" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div data-scroll-reveal="enter top and over 0.7s" class="article-meta">
    <a href="/刷短信接口/" class="article-date">
  <i class="fa fa-calendar"></i>
  <time datetime="2018-10-17T06:27:13.000Z" itemprop="datePublished">2018-10-17</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/note/">note</a>
  </div>


  </div>
  <div class="article-inner">
    
    

      <header class="article-header">

        
  
    <h1 itemprop="name">
      <a class="article-title" href="/刷短信接口/">
        <i class="fa fa-pencil-square-o  article-title-icon"></i>短信验证码安全问题</a>
    </h1>
  



      </header>
    
    <div class="article-entry" itemprop="articleBody">
      

        <br>
        <span id="busuanzi_container_page_pv">
          阅读次数<span id="busuanzi_value_page_pv"></span>
        </span>
        <ul>
<li>目录<br>{:toc}</li>
</ul>
<h2 id="0x00-事件"><a href="#0x00-事件" class="headerlink" title="0x00 事件"></a>0x00 事件</h2><p>短信验证码常被用于网站用户注册、账户安全登录以及忘记密码、确认下单等应用场景，特别是一些涉及到用户个人敏感行为时候，为了确认操作是用户本人执行的通常会使用短信验证码进行二次认证。</p>
<p>接口来源</p>
<ul>
<li>WEB注册接口</li>
<li>APP注册接口</li>
</ul>
<h2 id="0x01-短信验证码接口没有设置下发频次"><a href="#0x01-短信验证码接口没有设置下发频次" class="headerlink" title="0x01 短信验证码接口没有设置下发频次"></a>0x01 短信验证码接口没有设置下发频次</h2><p>短信验证码接口没有设置下发频次，发送大量验证码<br><br>IP数量不断变化，大量手机号码（不在意短信是否空号）</p>
<p>解决方法：</p>
<ol>
<li><p>设置发送间隔：</p>
<p> 限制同一个手机号码重复发送的时间间隔。通常设置为60-120秒，前端做倒计时限制，时间未到不能点击发送短信按钮，后台也做时间间隔限制，时间未到不能发送短信。</p>
</li>
<li><p>设置单用户发送上限</p>
<p> 设置每个用户单位时间内发送短信数的上限，如果超过阈值就不允许今天再次调用短信接口（阈值根据业务情况设置）。</p>
</li>
<li><p>IP限定</p>
<p> 根据自己的业务特点，设置每个IP每天的最大发送量，另外可校验手机号码和IP是否属于同一地区，由于IP的特殊性可能存在所处IP是大出口，一旦误杀后果会很验证，所以这个限制根据自身情况酌情考虑，对于有风控的团队来说，当发现发送IP存在异常可以对该IP增加二次认证来防止机器操作，也可以降低误杀情况</p>
</li>
<li><p>流程限制</p>
<p> 注册用户，将发送短信验证码和设置用户名密码分成两个步骤，第一步一个页面用来设置用户名和密码，用户设置用户名和密码发送到后台，获取到后台返回的第一步成功回执之后，进入第二步另一个页面发送手机短信验证码。（提交的速度和IP提交限制）<br><br> 附:将手机短信验证和用户名密码设置分成两个步骤，用户在设置成功用户名密码后，下一步才进行手机短信验证，并且需要在获取第一步成功的回执之后才可进行校验。</p>
</li>
<li><p>加入Token</p>
<p> 对发送者进行唯一性识别：防止修改参数伪造多个IP地址和手机号码进行恶意攻击，用Token作为唯一性识别标识，后台将Token注入到前端，前端可以获取到Token，请求发送短信验证码接口时带上Token，后台接收到Token进行验证，验证未通过不能发送短信。</p>
</li>
<li><p>增加图片验证码：</p>
<p> 采用图片验证码可有效防止采用自动化工具调用验证码短信接口，即当用户进行“获取短信验证码”操作前，弹出图片验证码，要求用户输入验证码后，服务器端再发送验证短信到用户手机上</p>
<ul>
<li>生成过程安全：图片验证码必须在服务器端进行产生与校验；</li>
<li>使用过程安全：单次有效，且以用户的验证请求为准；</li>
<li>验证码自身安全：不易被识别工具识别，能有效防止暴力破解，如算术题、中文类、选择题、滑动验证码等。</li>
</ul>
</li>
<li><p>埋点</p>
<p> 通过js收集一些网页版的设备指纹和客户端信息上报，通过js生成hash指纹区别不通设备，同时上传浏览器ua、分辨率、平台、系统等信息，有宽泛的鉴别能力，通过此方法可以建立自己的情报库。<br><br> 对用户进行人机验证，例如，前段js的加载，用户页面停留的时间，判断用户是否代理IP。<br><br> 有能力企业可以自己做风控系统</p>
</li>
</ol>
<h2 id="0x02-无效验证码"><a href="#0x02-无效验证码" class="headerlink" title="0x02 无效验证码"></a>0x02 无效验证码</h2><p>有验证码模块，但验证模块与业务功能没有关联性，此为无效验证，一般在新上线的系统中比较常见。</p>
<ul>
<li><p>获取短信验证码后，随意输入验证码或存在万能验证码，直接输入两次密码，可成功更改用户密码，没有对短信验证码进行验证</p>
</li>
<li><p>任意用户注册</p>
<p>  第一步，利用自己的手机号接收验证码进行验证，下一步跳转到一个设定密码的页面</p>
<p>  第二步，抓包，篡改手机号，使用任意手机号进行注册</p>
</li>
</ul>
<p>业务一致性存在安全隐患，身份验证与密码修改过程分开，验证无效。</p>
<h2 id="0x03-客户端验证绕过"><a href="#0x03-客户端验证绕过" class="headerlink" title="0x03 客户端验证绕过"></a>0x03 客户端验证绕过</h2><p>客户端验证是不安全的，通过拦截替换返回信息，绕过客户端本地验证，可能导致任意账号注册、登录及重置任意用户密码等一系列问题</p>
<ul>
<li><p>直接返回明文验证码</p>
</li>
<li><p>返回密文验证码</p>
</li>
<li><p>拦截替换返回包</p>
</li>
</ul>
<h2 id="0x04-验证码与手机号未绑定"><a href="#0x04-验证码与手机号未绑定" class="headerlink" title="0x04 验证码与手机号未绑定"></a>0x04 验证码与手机号未绑定</h2><p>一般来说短信验证码仅能使用一次，验证码和手机号未绑定，验证码一段时期内有效</p>
<ul>
<li><p>A手机的验证码，B可以拿来用；</p>
</li>
<li><p>A手机在一定时间间隔内接到两个验证码，都可以用。</p>
</li>
</ul>
<p>任意用户密码重置</p>
<pre><code>a、使用自己手机号收取验证码

b、自己的验证码和对方的手机号填上，下一步设置新密码
</code></pre><p>解决方法：</p>
<ol>
<li><p>在服务器进行有效验证，手机号和验证码在服务器进行唯一性绑定验证。</p>
</li>
<li><p>在服务端限制验证码发送周期，设置时效，限制次数。</p>
</li>
</ol>
<h2 id="0x05-验证码爆破"><a href="#0x05-验证码爆破" class="headerlink" title="0x05 验证码爆破"></a>0x05 验证码爆破</h2><p>短信验证码一般由4位或6位数字组成，若服务端未对验证时间、次数进行限制，则存在被爆破的可能</p>

      

    </div>





    <footer class="article-footer">
      
        <a data-url="http://www.pa55w0rd.club/刷短信接口/" data-id="cjop6cq7t000pntt6gvim775o" class="article-share-link" data-share="baidu" data-title="短信验证码安全问题">分享到</a>
      

      
        <a href="http://www.pa55w0rd.club/刷短信接口/#gitalk-container" class="article-comment-link">评论</a>
      

      

    </footer>
  </div>
  
</article>
<!--
<div class="share-component" data-disabled="" data-description="Share.js - 一键分享到微博，QQ空间，腾讯微博，人人，豆瓣">一键分享</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
-->







  
    <article id="post-从无到有通过ISO27001认证" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div data-scroll-reveal="enter top and over 0.7s" class="article-meta">
    <a href="/从无到有通过ISO27001认证/" class="article-date">
  <i class="fa fa-calendar"></i>
  <time datetime="2018-10-17T06:27:13.000Z" itemprop="datePublished">2018-10-17</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/安全建设/">安全建设</a>
  </div>


  </div>
  <div class="article-inner">
    
    

      <header class="article-header">

        
  
    <h1 itemprop="name">
      <a class="article-title" href="/从无到有通过ISO27001认证/">
        <i class="fa fa-pencil-square-o  article-title-icon"></i>从无到有通过ISO27001认证（转）</a>
    </h1>
  



      </header>
    
    <div class="article-entry" itemprop="articleBody">
      

        <br>
        <span id="busuanzi_container_page_pv">
          阅读次数<span id="busuanzi_value_page_pv"></span>
        </span>
        <h2>转自：</h2>

<blockquote>
<p><a href="http://ksowo.com/2018/01/19/%E4%BB%8E%E6%97%A0%E5%88%B0%E6%9C%89%E9%80%9A%E8%BF%87ISO27001%E8%AE%A4%E8%AF%81-%E5%BB%BA%E8%AE%BE%E7%AF%87/" target="_blank" rel="noopener">从无到有通过ISO27001认证-建设篇</a></p>
</blockquote>
<blockquote>
<p><a href="http://ksowo.com/2017/12/18/%E4%BB%8E%E6%97%A0%E5%88%B0%E6%9C%89%E9%80%9A%E8%BF%87ISO27001%E8%AE%A4%E8%AF%81-%E5%AE%A1%E6%A0%B8%E7%AF%87/" target="_blank" rel="noopener">从无到有通过ISO27001认证-审核篇</a></p>
</blockquote>
<ul>
<li>目录<br>{:toc}</li>
</ul>
<h1 id="建设篇"><a href="#建设篇" class="headerlink" title="建设篇"></a><strong>建设篇</strong></h1><p>安全是一个不断的持续的过程，每个环节都不可缺少，在安全的路上懂的越多发现自己不懂的越多。</p>
<h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 <strong>概述</strong></h2><p>我在某做WL的公司负责公司整体安全，保护公司业务系统的安全（这个系统会有大部分看官的个人信息）。公司业务发展很快，但是信息化基础建设很落后，管理不规范，人员技术水平参差不齐，对网络和安全没有认识。领导对安全概念模糊，无法落实；因为是新来的，领导对提出的解决方案有选择的进行，但是有个好的地方就是公司发展太快，出现过不少安全问题，给我们安全部带来了外部推动力（虽然不想出事，但是出事了可以加快安全建设的脚步）。</p>
<p>一年的时间从什么都没到现在的逐渐成型、各种安全流程的建立和落地，建了ISO27001安全体系（通过了认证），此篇文章进行了一个总结，期间也碰到了的很多坑和挫折，自己也在这个过程中学习了成长了，这里再次感谢帮助过我的朋友们，感谢安全部另外一位X大牛。</p>
<h2 id="2-对ISO27001理解"><a href="#2-对ISO27001理解" class="headerlink" title="2 对ISO27001理解"></a>2 <strong>对ISO27001理解</strong></h2><p>通过一年的时间对从0到拿证的过程，简单说一下我对ISO27001的理解：不管是ISO27001还是安全我觉得都是围绕着业务进行的，一切的出发点都是保证业务的连续的、稳定的运行，要保证业务的连续的、稳定的运行，你需要知道你有什么资产，资产面临什么风险，这些风险要怎么处理，这样一个过程中还要循序PDCA的原则（plan-do-check-action）。做每一个制度和每一个要求的时候从业务角度出发去思考，这样做才可以最大化的保证所写的制度规范能执行，为后面落地提供依据。凭空或单纯从安全的角度看问题，很容易把问题想的很严重，给出的解决方案往往短时间无法执行，后面会简阐述一下当时的想法。</p>
<p>脱离业务谈安全和脱离安全谈业务都是不现实的。</p>
<p><img src="\assets\img\iso27001\iso27001-1.png" alt=""></p>
<h2 id="3-为什么要做"><a href="#3-为什么要做" class="headerlink" title="3 为什么要做"></a>3 <strong>为什么要做</strong></h2><p>我个人理解做这个事情的2大因素：</p>
<h3 id="3-1-外因"><a href="#3-1-外因" class="headerlink" title="3.1 外因"></a>3.1 <strong>外因</strong></h3><p>一个公司发展到一定程度和规模的时候，公司自身的安全已经不是自己的问题了，你会涉及到社会层面、合作层面、业务发展层面。如：我们公司的发起做ISO27001的需求其实就不是来自安全部，是业务部门在推广业务的过程中遇到了阻力，因为客户的系统过了ISO27001他们会要求你与他对接的系统有一定的安全性，这个要求就表现为ISO27001。</p>
<p>我们就业找工作很多时候是看能力，但是有时候证书就像一个门票，没有门票就无法上车，ISO27001就是一个公司的证书。</p>
<p>还有重要因素《网络安全法》出台了，国家对安全的要求肯定是先从政府自身开始，然后慢慢到要求企业，与其等出事不如从现在开始做。</p>
<h3 id="3-2-内因"><a href="#3-2-内因" class="headerlink" title="3.2 内因"></a>3.2 <strong>内因</strong></h3><p>每一个公司通过几年或更长时间的成长，公司会积累很多信息化系统，保障这些系统的正常运行就很重要，并且在对信息化管理过程中出现的很多职责不明确，边界不清，流程和制度不全，所有的操作规范和行为都靠约定俗成，没有体系化文档支撑，这些都影响系统稳定运行。</p>
<h2 id="4-控制项简单说明"><a href="#4-控制项简单说明" class="headerlink" title="4 控制项简单说明"></a>4 <strong>控制项简单说明</strong></h2><p>ISO27001相信做安全的同学都有接触，百度有很详细的说明，我简单说一下自己的理解，大牛勿喷。ISO27001是一套安全管理类的文档，为了保证信息化工作和生产正常稳定的运行，一切都是围绕业务展开的，很多安全管理思路从公司的核心业务出发去考虑很多制度和规范都可以合理的解释。说个题外话很多做技术的和做管理的都是相互不对路，相互看不起，说句实在很多时候纯粹靠技术或纯粹靠管理去达到某个防护目标是不可能实现的，技术的实现可以方便和简化管理，管理制度的要求可以推动技术的落地，2者是相辅相成。</p>
<p>ISO27001从原来的15项标准要求变为了现在的18项，新增了2项、通信和操作管理拆除为2项。</p>
<p><img src="\assets\img\iso27001\iso27001-2.png" alt=""></p>
<p>下面简单说一下我对18个标准项的理解，并不是所有标准都要响应，如果实际情况没有可以不写，标准的要求不是重新编写公司已有的制度，只需要在原有制度上增加对安全相关的控制项：</p>
<p><img src="\assets\img\iso27001\iso27001-3.png" alt=""></p>
<h2 id="5-文档编写架构"><a href="#5-文档编写架构" class="headerlink" title="5 文档编写架构"></a>5 <strong>文档编写架构</strong></h2><p>ISO27001对应的文档说明其实叫适用性声明，如上表文件和控制项是一一对应的，标准文档架构为：手册、程序文件、作业指导书、运行记录：</p>
<p><img src="\assets\img\iso27001\iso27001-21.jpg" alt=""></p>
<p>Ø 手册：就是对ISO27001体系的一个总体的说明文档</p>
<p><img src="\assets\img\iso27001\iso27001-22.jpg" alt=""></p>
<p>Ø 程序文件：具体描述每一个对应的标准要做什么</p>
<p><img src="\assets\img\iso27001\iso27001-23.png" alt=""></p>
<p>Ø 作业指导书：是对程序文件进一步解读，怎么做</p>
<p><img src="\assets\img\iso27001\iso27001-24.png" alt=""></p>
<p>Ø 运行记录：是对做了上述工作后的一个产出文档，可以是电子记录或纸质文件</p>
<p><img src="\assets\img\iso27001\iso27001-25.png" alt=""></p>
<p>针对这个情况咨询过评审老师，现在可以按照自己公司的实际情况去执行，但是手册文件必须都有。我们针对公司的实际情况做了修改，因为很多时候落地的时候都是以制度去要求和约束，我们把原有架构做了改变，重写全部的策略和要求，当然过程中有参考，整个过程耗费2人一个月时间（对于技术出身的人来说是艰苦的岁月），中途还修改了2个版本，跟领导对内容一个一个文档审。</p>
<p>变为：手册、策略、制度、运行记录</p>
<p>Ø 手册：一样没变</p>
<p>Ø 策略：针对标准要求，提出我们自己公司的要求</p>
<p><img src="\assets\img\iso27001\iso27001-26.png" alt=""></p>
<p>Ø 制度：用制度明确需要做什么，要求怎么做</p>
<p><img src="\assets\img\iso27001\iso27001-27.png" alt=""></p>
<p>Ø 运行记录：不单纯为运行记录文件，还包含了怎么做的具体操作文档</p>
<p><img src="\assets\img\iso27001\iso27001-28.png" alt=""></p>
<p><img src="\assets\img\iso27001\iso27001-29.png" alt=""><br>最后强调一下最好不要拍脑袋写一些要求，尽量实事求是，做到什么程度就在这个程度是增加安全要求。</p>
<h2 id="6-体系运行"><a href="#6-体系运行" class="headerlink" title="6 体系运行"></a>6 <strong>体系运行</strong></h2><h3 id="6-1-体系发布"><a href="#6-1-体系发布" class="headerlink" title="6.1 体系发布"></a>6.1 <strong>体系发布</strong></h3><p>安全的工作如果由上致下会很顺利很容易推动，但是，体系的发布一定需要领导层去帮你发布执行，让全公司知道有这样一件事情，然后给领导要讲解（洗脑）这个东西是做什么的，可以为公司带来什么好处，让领导认同或部分认同你的观点，这样对后面的体系建设会很有帮助。</p>
<h2 id="6-2-体系分解"><a href="#6-2-体系分解" class="headerlink" title="6.2 体系分解"></a>6.2 <strong>体系分解</strong></h2><p>按照正常套路来说ISO27001要做的东西很多，我把安全体系分割为了3大块：管理、技术、和运行（前面也有提到）。<strong>管理：</strong>主要是制度、规范约束；<strong>技术</strong>：主要是实现目标；<strong>运行</strong>：主要是让前面的2点不要成为空谈，要有定期检查产出。</p>
<p><img src="\assets\img\iso27001\iso27001-30.png" alt=""></p>
<p>本来在按照公司的现状我制定的安全是分三步走的：起步-成长-成熟，成熟后运行2-3年再通过ISO27001的审核，在我个人看来毫无压力。但是由于要拿证时间只有1年，所有的东西都需要重新做没法按照套路来。</p>
<p><img src="\assets\img\iso27001\iso27001-31.png" alt=""></p>
<p>​    如果大家的时间较多，建议做一次全面的风险评估，针对风险一个一个完善文档。</p>
<h3 id="6-3-体系执行"><a href="#6-3-体系执行" class="headerlink" title="6.3 体系执行"></a>6.3 <strong>体系执行</strong></h3><p>执行主要是看检查在上述文档中的产出，如：发布了《安全运维管理制度》，那么根据要求，可能需要对机房进行周期性巡检产出《机房巡检记录表》，进出机房需要产出《机房进出记录表》。</p>
<p><img src="\assets\img\iso27001\iso27001-32.png" alt=""></p>
<p>按照个套路检查一个制度文件的产出，因此我们做了一个表，便于后面的审计：</p>
<p><img src="\assets\img\iso27001\iso27001-35.png" alt=""></p>
<p>​    大家可以把一些事情简单化，什么什么都用文档很繁琐，如：</p>
<p>基于django 自主开发的资产管理系统，如果出现什么漏洞可以快速定位。</p>
<p><img src="\assets\img\iso27001\iso27001-36.png" alt=""></p>
<p>​    上面只是日常的执行要求，ISO27001还会有一个每年的内审和评审，内审：检查日常工作是否按照要求做好；评审：审核制度体系是否需要跟上公司的业务变化，做错对应的调整。</p>
<h2 id="6-4-体系培训"><a href="#6-4-体系培训" class="headerlink" title="6.4 体系培训"></a>6.4 <strong>体系培训</strong></h2><p>体系制度已经发布后，执行是有阻力的，因为打破了原有的约定俗成，增加了各个部门的工作量，这个需要非常耐心的去解释解答（这个过程很多人会找碴），需要培训去使大家有一定认识，从而配合你做事情。当然最重要的是从领导层面推动，那样阻力就少很多，我们在这个过程中也没少发生申请事件，被删文件夹、中勒索病毒、数据库被暴力破解还有来自合作伙伴的漏洞通报。</p>
<p>培训可以从以下几块做：</p>
<p>Ø 新员工培训</p>
<p>Ø 平时公司内部培训、讨论、讲座</p>
<p>Ø 真实案例延时（渗透测试、当场干公司的系统，顺便展示实力，不过这个度自己要把握好）</p>
<p>多抛头露面准没坏处。</p>
<h2 id="7-总结"><a href="#7-总结" class="headerlink" title="7 总结"></a>7 <strong>总结</strong></h2><p>简单介绍了ISO27001的建设，一个体系文件写下来，深深的觉得这个东西就是套路，环环相扣，都是相互引用的。在刚开始的时候压力、阻力会很大，但是做好了后面是一劳永逸，让制度执行几个月后做内审和评审，发现问题并解决，做完这些就基本可以申请外审了。</p>
<p>最后如果大家有想法要做的话可以先看一次标准，理解一下，再结合实际情况进行编写，因为在制度文档里面写到的就需要实现，外审的时候就要查的，尽量实事求是。</p>
<p>后面会对申请审核的前中后和大家分享。</p>
<h1 id="审核篇"><a href="#审核篇" class="headerlink" title="审核篇"></a><strong>审核篇</strong></h1><h2 id="1-审核前"><a href="#1-审核前" class="headerlink" title="1 审核前"></a>1 <strong>审核前</strong></h2><h3 id="1-1-注意事项"><a href="#1-1-注意事项" class="headerlink" title="1.1 注意事项"></a>1.1 <strong>注意事项</strong></h3><p>找个一个评审机构交钱（相信机构大家能找到），签合同，签合同的时候需要注意几点：</p>
<p>Ø <strong>体系类型、覆盖范围、人数</strong></p>
<p>体系类型这个问题不大，基本都不会错；覆盖范围是需要慎重的，因为最后的证书上面会写清楚公司所通过认真的范围，如果不包含自己的业务那认证就白做了，当时写错了还要改合同，后面搞的很麻烦，希望大家不要重现我的坑；人数要写真实的，人数会关系到最后这个认证的费用，人数越多费用越贵。</p>
<p><img src="\assets\img\iso27001\iso27001-37.png" alt=""></p>
<p>附一个ITSMS的可以受理的范围：</p>
<p><img src="\assets\img\iso27001\iso27001-38.png" alt=""></p>
<p>Ø 填写申请书《管理体系认证申请书》</p>
<p>公司名字和地址要真实，包含所有的分公司，其中有临时办公场所也需要写，分公司多的话检查的时候是需要抽查到不同的分公司审核的（说是抽查其实甲方可以指定）。如果只是一个地址认证就写对应的地址就好。</p>
<p><img src="\assets\img\iso27001\iso27001-40.png" alt=""></p>
<h3 id="1-2-需要递交的电子档文件"><a href="#1-2-需要递交的电子档文件" class="headerlink" title="1.2 需要递交的电子档文件"></a>1.2 <strong>需要递交的电子档文件</strong></h3><h4 id="1-1-1-电子文档"><a href="#1-1-1-电子文档" class="headerlink" title="1.1.1 电子文档"></a>1.1.1 电子文档</h4><p>组织简介、组织机构图、人员情况、申请认证产品的生产/加工/服务工艺流程图；</p>
<p>管理手册和程序文件；</p>
<p>关于认证活动的限制条件(如出于安全和/或保密等原因，存在时)；</p>
<p>信息安全管理体系方针和目标；</p>
<p>支持信息安全管理体系的规程和控制措施；</p>
<p>风险评估报告；（含风险评估方法的描述）；</p>
<p>残余风险报告</p>
<p>风险处置计划</p>
<p>适用性声明；</p>
<p>适用的法律法规的标准的清单。</p>
<p>申请书附表四、五（见申请书第6、7页）（到时候认证公司会给你文档的，如果有需求我也可以分享）</p>
<h4 id="1-1-2-二、所需原件有："><a href="#1-1-2-二、所需原件有：" class="headerlink" title="1.1.2 二、所需原件有："></a>1.1.2 二、所需原件有：</h4><p>合同，一式两份，签名盖章；</p>
<p>申请书，一式一份，签名盖章；</p>
<p>信息安全及信息技术服务管理体系保密协议，一式两份，签名盖章；</p>
<p>临时场所清单；加盖企业公章；（不存在临时场所企业不需提供）</p>
<p>营业执照、相关资质证书（最新年检副本）一式一份，加盖企业公章。</p>
<h2 id="2-审核中"><a href="#2-审核中" class="headerlink" title="2 审核中"></a>2 <strong>审核中</strong></h2><p>所有文档提交后，等待外审的到来，外审：分为一审和二审，外审的时候认证公司会联系负责人并约定好检查时间到现场检查。如果项目含了外审老师的差旅费，后面就不需要公司承担，如果不含的话，需要报销审核老师的差旅费（建议签合同的时候把这部分的钱包含了，免得后面太麻烦）。</p>
<p><img src="\assets\img\iso27001\iso27001-41.png" alt=""></p>
<p>在通知书里会包含审核的内容和计划，在审核老师来之前做好准备。</p>
<h3 id="2-1-一审"><a href="#2-1-一审" class="headerlink" title="2.1 一审"></a>2.1 <strong>一审</strong></h3><p>一审安排：</p>
<p><img src="\assets\img\iso27001\iso27001-42.png" alt=""></p>
<p>主要是审核制度体系文件是否满足标准，公司有没按照体系制度的要求去执行，是否有运行记录的产出，公司的总体情况以及看一下公司的办公环境。一审主要是针对信息安全部进行的，以了解情况为主，一般来说有问题可以当场整改。</p>
<p>一般一审只需要一天，审核人员为：审核组长。审核完成会出一份审核结果。如果不通过一般都在一审不通过，不需要二审了。</p>
<p><img src="\assets\img\iso27001\iso27001-43.png" alt=""></p>
<h3 id="2-2-二审"><a href="#2-2-二审" class="headerlink" title="2.2 二审"></a>2.2 <strong>二审</strong></h3><p>二审安排：</p>
<p><img src="\assets\img\iso27001\iso27001-44.png" alt=""></p>
<p>二审建议首末次会议最好有重要的领导参加，表示对安全的重视（至于为什么后面解释）。</p>
<p>二审需要的时间会较长，我们那时候是2个审核员审核4天，具体的时间需求会根据所申报的系统和人数去判定。系统多时间长审核的也很详细，审核的套路不是像等保对着一个一个标准制度过。我们的那2个审核老师是把对应的系统负责人叫过来大家聊天，如：你负责什么，平时正常工作什么做的，忙不忙周末要加班吗。如果心里有底气的不怕被套路，坐等没那么好的建议还是多培训一下，让主要负责人熟悉一下安全部所写的体系。</p>
<p>​    审核完成后现场给出不符合项进行整改，反正不管做的多好都有整改项的。</p>
<p><img src="\assets\img\iso27001\iso27001-45.png" alt=""></p>
<h2 id="3-审核后"><a href="#3-审核后" class="headerlink" title="3 审核后"></a>3 <strong>审核后</strong></h2><p>审核完成后需要对上面的不符合项进行整改，整个整改需要做的有：</p>
<p>1、 整改前后截图</p>
<p>2、 打印纸质文档，并需要手写填写</p>
<p>3、 扫描彩色版发给审核组长确认</p>
<p><img src="\assets\img\iso27001\iso27001-46.png" alt=""></p>
<p>最后就是把所有的资料扫描盖章快递到指定地址。</p>
<h1 id="4-总结"><a href="#4-总结" class="headerlink" title="4 总结"></a>4 <strong>总结</strong></h1><p>通过跟审核老师沟通，发现如果一个企业有做好安全的决心，并且也再去做，领导足够重视那样一般来说肯定可以过，但是如果审核过程中出现说的但是没做，那就是原则性问题了，就会不过。ISO27001总体原则就是：说我所做，做我所说。说到必须要做，做的好不好是改进的地方。</p>
<p>所以审核不要怕有不符合项，不符合项是一定会有的。除了原则性问题外，有2种情况也会导致不过：</p>
<p>1、 不符合项太多</p>
<p>2、 区域性不符合，严重不符合，举例子：抽查防病毒安装情况，一个部门抽查都没装就是区域性；一个办公环境一层都没装，而且包含很多部门，这个就是严重不符合</p>
<p>审核主要是自己有做，心里有底，最后照顾好审核老师的心情，中午一起吃个饭，这样后面就好说话了，过的几率就会大很多。</p>
<p>最后祝大家ISO27001外审都通过。</p>

      

    </div>





    <footer class="article-footer">
      
        <a data-url="http://www.pa55w0rd.club/从无到有通过ISO27001认证/" data-id="cjop6cq9f0020ntt6z1kuwgmj" class="article-share-link" data-share="baidu" data-title="从无到有通过ISO27001认证（转）">分享到</a>
      

      
        <a href="http://www.pa55w0rd.club/从无到有通过ISO27001认证/#gitalk-container" class="article-comment-link">评论</a>
      

      

    </footer>
  </div>
  
</article>
<!--
<div class="share-component" data-disabled="" data-description="Share.js - 一键分享到微博，QQ空间，腾讯微博，人人，豆瓣">一键分享</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
-->







  
    <article id="post-聊聊HTTPS和SSLTLS协议" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div data-scroll-reveal="enter top and over 0.7s" class="article-meta">
    <a href="/聊聊HTTPS和SSLTLS协议/" class="article-date">
  <i class="fa fa-calendar"></i>
  <time datetime="2018-10-17T06:27:13.000Z" itemprop="datePublished">2018-10-17</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/note/">note</a>
  </div>


  </div>
  <div class="article-inner">
    
    

      <header class="article-header">

        
  
    <h1 itemprop="name">
      <a class="article-title" href="/聊聊HTTPS和SSLTLS协议/">
        <i class="fa fa-pencil-square-o  article-title-icon"></i>聊聊HTTPS和SSLTLS协议（转）</a>
    </h1>
  



      </header>
    
    <div class="article-entry" itemprop="articleBody">
      

        <br>
        <span id="busuanzi_container_page_pv">
          阅读次数<span id="busuanzi_value_page_pv"></span>
        </span>
        <p>转自：<a href="http://www.techug.com/post/https-ssl-tls.html" target="_blank" rel="noopener">http://www.techug.com/post/https-ssl-tls.html</a></p>
<ul>
<li>目录<br>{:toc}</li>
</ul>
<h2 id="0x00-几个基本术语含义——HTTPS、SSL、TLS"><a href="#0x00-几个基本术语含义——HTTPS、SSL、TLS" class="headerlink" title="0x00 几个基本术语含义——HTTPS、SSL、TLS"></a>0x00 几个基本术语含义——HTTPS、SSL、TLS</h2><ol>
<li><p>“HTTP”是干嘛用滴？</p>
<p> 首先，HTTP 是一个网络协议，是专门用来帮你传输 Web 内容滴。关于这个协议，就算你不了解，至少也听说过吧？比如你访问俺的博客的主页，浏览器地址栏会出现如下的网址</p>
<p> <strong><a href="http://www.techug.com/" target="_blank" rel="noopener">http://www.techug.com/</a></strong></p>
<p> 俺加了粗体的部分就是指 HTTP 协议。大部分网站都是通过 HTTP 协议来传输 Web 页面、以及 Web 页面上包含的各种东东（图片、CSS 样式、JS 脚本）。</p>
</li>
<li><p>“SSL/TLS”是干嘛用滴？</p>
<p> SSL 是洋文“Secure Sockets Layer”的缩写，中文叫做“安全套接层”。它是在上世纪90年代中期，由网景公司设计的。（顺便插一句，网景公司不光发明了 SSL，还发明了很多 Web 的基础设施——比如“CSS 样式表”和“JS 脚本”）</p>
<p> 为啥要发明 SSL 这个协议捏？因为原先互联网上使用的 HTTP 协议是明文的，存在很多缺点——比如传输内容会被偷窥（嗅探）和篡改。发明 SSL 协议，就是为了解决这些问题。</p>
<p> 到了1999年，SSL 因为应用广泛，已经成为互联网上的事实标准。IETF 就在那年把 SSL 标准化。标准化之后的名称改为 TLS（是“Transport Layer Security”的缩写），中文叫做“传输层安全协议”。</p>
<p> 很多相关的文章都把这两者并列称呼（SSL/TLS），因为这两者可以视作同一个东西的不同阶段。</p>
</li>
<li><p>“HTTPS”是啥意思？</p>
<p> 解释完 HTTP 和 SSL/TLS，现在就可以来解释 HTTPS 啦。咱们通常所说的 HTTPS 协议，说白了就是“HTTP 协议”和“SSL/TLS 协议”的组合。你可以把 HTTPS 大致理解为——“HTTP over SSL”或“HTTP over TLS”（反正 SSL 和 TLS 差不多）。</p>
</li>
</ol>
<h2 id="0x01-HTTP-协议的特点"><a href="#0x01-HTTP-协议的特点" class="headerlink" title="0x01 HTTP 协议的特点"></a>0x01 HTTP 协议的特点</h2><p>作为背景知识介绍，还需要再稍微谈一下 HTTP 协议本身的特点。HTTP 本身有很多特点，考虑到篇幅有限，俺只谈那些和 HTTPS 相关的特点。</p>
<ol>
<li><p>HTTP 的版本和历史</p>
<p> 如今咱们用的 HTTP 协议，版本号是 1.1（也就是 HTTP 1.1）。这个 1.1 版本是1995年底开始起草的（技术文档是 RFC2068），并在1999年正式发布（技术文档是 RFC2616）。</p>
<p> 在 1.1 之前，还有曾经出现过两个版本“0.9 和 1.0”，其中的 HTTP 0.9 【没有】被广泛使用，而 HTTP 1.0 被广泛使用过。</p>
<p> 另外，据说明年（2015）IETF 就要发布 HTTP 2.0 的标准了。俺拭目以待。</p>
</li>
<li><p>HTTP 和 TCP 之间的关系</p>
<p> 简单地说，TCP 协议是 HTTP 协议的基石——HTTP 协议需要依靠 TCP 协议来传输数据。</p>
<p> 在网络分层模型中，TCP 被称为“传输层协议”，而 HTTP 被称为“应用层协议”。</p>
<p> 有很多常见的应用层协议是以 TCP 为基础的，比如“FTP、SMTP、POP、IMAP”等。</p>
<p> TCP 被称为“面向连接”的传输层协议。关于它的具体细节，俺就不展开了（否则篇幅又失控了）。你只需知道：传输层主要有两个协议，分别是 TCP 和 UDP。</p>
<p> TCP 比 UDP 更可靠。你可以把 TCP 协议想象成某个水管，发送端这头进水，接收端那头就出水。并且 TCP 协议能够确保，先发送的数据先到达（与之相反，UDP 不保证这点）。</p>
</li>
<li><p>HTTP 协议如何使用 TCP 连接？</p>
<p> HTTP 对 TCP 连接的使用，分为两种方式：俗称“短连接”和“长连接”（“长连接”又称“持久连接”，洋文叫做“Keep-Alive”或“Persistent Connection”）</p>
<p> 假设有一个网页，里面包含好多图片，还包含好多【外部的】CSS 文件和 JS 文件。在“短连接”的模式下，浏览器会先发起一个 TCP 连接，拿到该网页的 HTML 源代码（拿到 HTML 之后，这个 TCP 连接就关闭了）。然后，浏览器开始分析这个网页的源码，知道这个页面包含很多外部资源（图片、CSS、JS）。然后针对【每一个】外部资源，再分别发起一个个 TCP 连接，把这些文件获取到本地（同样的，每抓取一个外部资源后，相应的 TCP 就断开）</p>
<p> 相反，如果是“长连接”的方式，浏览器也会先发起一个 TCP 连接去抓取页面。但是抓取页面之后，该 TCP 连接并不会立即关闭，而是暂时先保持着（所谓的“Keep-Alive”）。然后浏览器分析 HTML 源码之后，发现有很多外部资源，就用刚才那个 TCP 连接去抓取此页面的外部资源。</p>
<p> 在 HTTP 1.0 版本，【默认】使用的是“短连接”（那时候是 Web 诞生初期，网页相对简单，“短连接”的问题不大）；</p>
<p> 到了1995年底开始制定 HTTP 1.1 草案的时候，网页已经开始变得复杂（网页内的图片、脚本越来越多了）。这时候再用短连接的方式，效率太低下了（因为建立 TCP 连接是有“时间成本”和“CPU 成本”滴）。所以，在 HTTP 1.1 中，【默认】采用的是“Keep-Alive”的方式。</p>
<p> 关于“Keep-Alive”的更多介绍，可以参见维基百科词条（在“这里”）</p>
</li>
</ol>
<h2 id="0x02-加密算法的概念"><a href="#0x02-加密算法的概念" class="headerlink" title="0x02 加密算法的概念"></a>0x02 加密算法的概念</h2><ol>
<li><p>啥是“加密”和“解密”？</p>
<p> 通俗而言，你可以把“加密”和“解密”理解为某种【互逆的】数学运算。就好比“加法和减法”互为逆运算、“乘法和除法”互为逆运算。</p>
<p> “加密”的过程，就是把“明文”变成“密文”的过程；反之，“解密”的过程，就是把“密文”变为“明文”。在这两个过程中，都需要一个关键的东东——叫做“密钥”——来参与数学运算。</p>
</li>
<li><p>啥是“对称加密”？</p>
<p> 所谓的“对称加密技术”，意思就是说：“加密”和“解密”使用【相同的】密钥。这个比较好理解。就好比你用 7zip 或 WinRAR 创建一个带密码（口令）的加密压缩包。当你下次要把这个压缩文件解开的时候，你需要输入【同样的】密码。在这个例子中，密码/口令就如同刚才说的“密钥”。</p>
</li>
<li><p>啥是“非对称加密”？</p>
<p> 所谓的“非对称加密技术”，意思就是说：“加密”和“解密”使用【不同的】密钥。这玩意儿比较难理解，也比较难想到。当年“非对称加密”的发明，还被誉为“密码学”历史上的一次革命。</p>
<p> 由于篇幅有限，对“非对称加密”这个话题，俺就不展开了。有空的话，再单独写一篇扫盲。</p>
</li>
<li><p>各自有啥优缺点？</p>
<p> 看完刚才的定义，很显然：（从功能角度而言）“非对称加密”能干的事情比“对称加密”要多。这是“非对称加密”的优点。但是“非对称加密”的实现，通常需要涉及到“复杂数学问题”。所以，“非对称加密”的性能通常要差很多（相对于“对称加密”而言）。</p>
<p> 这两者的优缺点，也影响到了 SSL 协议的设计。</p>
</li>
</ol>
<h2 id="0x03-CA-证书的原理及用途"><a href="#0x03-CA-证书的原理及用途" class="headerlink" title="0x03 CA 证书的原理及用途"></a>0x03 CA 证书的原理及用途</h2><p>关于这方面，请看百度《数字证书及CA的扫盲介绍》。这里就不再重复唠叨了，免得篇幅太长。</p>
<h2 id="0x04-HTTPS-协议的需求是啥"><a href="#0x04-HTTPS-协议的需求是啥" class="headerlink" title="0x04 HTTPS 协议的需求是啥"></a>0x04 HTTPS 协议的需求是啥</h2><p>花了好多口水，终于把背景知识说完了。下面正式进入正题。先来说说当初设计 HTTPS 是为了满足哪些需求？</p>
<p>很多介绍 HTTPS 的文章一上来就给你讲实现细节。个人觉得：这是不好的做法。早在2009年开博的时候，发过一篇《学习技术的三部曲：WHAT、HOW、WHY》，其中谈到“WHY 型问题”的重要性。一上来就给你讲协议细节，你充其量只能知道 WHAT 和 HOW，无法理解 WHY。俺在前一个章节讲了“背景知识”，在这个章节讲了“需求”，这就有助于你理解：当初</p>
<ul>
<li>为什么</li>
</ul>
<p>要设计成这样？——这就是 WHY 型的问题。</p>
<ul>
<li>兼容性</li>
</ul>
<p>因为是先有 HTTP 再有 HTTPS。所以，HTTPS 的设计者肯定要考虑到对原有 HTTP 的兼容性。</p>
<p>这里所说的兼容性包括很多方面。比如已有的 Web 应用要尽可能无缝地迁移到 HTTPS；比如对浏览器厂商而言，改动要尽可能小；……</p>
<p>基于“兼容性”方面的考虑，很容易得出如下几个结论：</p>
<ol>
<li>HTTPS 还是要基于 TCP 来传输<br><br>（如果改为 UDP 作传输层，无论是 Web 服务端还是浏览器客户端，都要大改，动静太大了）</li>
<li>单独使用一个新的协议，把 HTTP 协议包裹起来<br><br>（所谓的“HTTP over SSL”，实际上是在原有的 HTTP 数据外面加了一层 SSL 的封装。HTTP 协议原有的 GET、POST 之类的机制，基本上原封不动）</li>
</ol>
<p>打个比方：如果原来的 HTTP 是塑料水管，容易被戳破；那么如今新设计的 HTTPS 就像是在原有的塑料水管之外，再包一层金属水管。一来，原有的塑料水管照样运行；二来，用金属加固了之后，不容易被戳破。</p>
<ul>
<li>可扩展性</li>
</ul>
<p>前面说了，HTTPS 相当于是“HTTP over SSL”。</p>
<p>如果 SSL 这个协议在“可扩展性”方面的设计足够牛逼，那么它除了能跟 HTTP 搭配，还能够跟其它的应用层协议搭配。岂不美哉？</p>
<p>现在看来，当初设计 SSL 的人确实比较牛。如今的 SSL/TLS 可以跟很多常用的应用层协议（比如：FTP、SMTP、POP、Telnet）搭配，来强化这些应用层协议的安全性。</p>
<p>接着刚才打的比方：如果把 SSL/TLS 视作一根用来加固的金属管，它不仅可以用来加固输水的管道，还可以用来加固输煤气的管道。</p>
<ul>
<li>保密性（防泄密）</li>
</ul>
<p>HTTPS 需要做到足够好的保密性。</p>
<p>说到保密性，首先要能够对抗嗅探（行话叫 Sniffer）。所谓的“嗅探”，通俗而言就是监视你的网络传输流量。如果你使用明文的 HTTP 上网，那么监视者通过嗅探，就知道你在访问哪些网站的哪些页面。</p>
<p>嗅探是最低级的攻击手法。除了嗅探，HTTPS 还需要能对抗其它一些稍微高级的攻击手法——比如“重放攻击”（后面讲协议原理的时候，会再聊）。</p>
<ul>
<li>完整性（防篡改）</li>
</ul>
<p>除了“保密性”，还有一个同样重要的目标是“确保完整性”。关于“完整性”这个概念，在之前的博文《扫盲文件完整性校验——关于散列值和数字签名》中大致提过。健忘的同学再去温习一下。</p>
<p>在发明 HTTPS 之前，由于 HTTP 是明文的，不但容易被嗅探，还容易被篡改。<br>举个例子：</p>
<p>比如咱们天朝的网络运营商（ISP）都比较流氓，经常有网友抱怨说访问某网站（本来是没有广告的），竟然会跳出很多中国电信的广告。为啥会这样捏？因为你的网络流量需要经过 ISP 的线路才能到达公网。如果你使用的是明文的 HTTP，ISP 很容易就可以在你访问的页面中植入广告。</p>
<p>所以，当初设计 HTTPS 的时候，还有一个需求是“确保 HTTP 协议的内容不被篡改”。</p>
<ul>
<li>真实性（防假冒）</li>
</ul>
<p>在谈到 HTTPS 的需求时，“真实性”经常被忽略。其实“真实性”的重要程度不亚于前面的“保密性”和“完整性”。</p>
<p>举个例子：</p>
<p>你因为使用网银，需要访问该网银的 Web 站点。那么，你如何确保你访问的网站确实是你想访问的网站？（这话有点绕口令）</p>
<p>有些天真的同学会说：通过看网址里面的域名，来确保。为啥说这样的同学是“天真的”？因为 DNS 系统本身是不可靠的（尤其是在设计 SSL 的那个年代，连 DNSSEC 都还没发明）。由于 DNS 的不可靠（存在“域名欺骗”和“域名劫持”），你看到的网址里面的域名【未必】是真实滴！</p>
<p>（不了解“域名欺骗”和“域名劫持”的同学，可以参见俺之前写的《扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”》）</p>
<p>所以，HTTPS 协议必须有某种机制来确保“真实性”的需求（至于如何确保，后面会细聊）。</p>
<ul>
<li>性能</li>
</ul>
<p>再来说最后一个需求——性能。</p>
<p>引入 HTTPS 之后，【不能】导致性能变得太差。否则的话，谁还愿意用？</p>
<p>为了确保性能，SSL 的设计者至少要考虑如下几点：</p>
<ol>
<li>如何选择加密算法<br>（“对称”or“非对称”）？</li>
<li>如何兼顾 HTTP 采用的“短连接”TCP 方式？<br><br>（SSL 是在1995年之前开始设计的，那时候的 HTTP 版本还是 1.0，默认使用的是“短连接”的 TCP 方式——默认不启用 Keep-Alive）</li>
</ol>

      

    </div>





    <footer class="article-footer">
      
        <a data-url="http://www.pa55w0rd.club/聊聊HTTPS和SSLTLS协议/" data-id="cjop6cq9h0021ntt6porhzw4r" class="article-share-link" data-share="baidu" data-title="聊聊HTTPS和SSLTLS协议（转）">分享到</a>
      

      
        <a href="http://www.pa55w0rd.club/聊聊HTTPS和SSLTLS协议/#gitalk-container" class="article-comment-link">评论</a>
      

      

    </footer>
  </div>
  
</article>
<!--
<div class="share-component" data-disabled="" data-description="Share.js - 一键分享到微博，QQ空间，腾讯微博，人人，豆瓣">一键分享</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
-->







  
    <article id="post-mysql-python安装时提示mysql_config not fount" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div data-scroll-reveal="enter top and over 0.7s" class="article-meta">
    <a href="/mysql-python安装时提示mysql_config not fount/" class="article-date">
  <i class="fa fa-calendar"></i>
  <time datetime="2018-10-16T06:27:13.000Z" itemprop="datePublished">2018-10-16</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/note/">note</a>
  </div>


  </div>
  <div class="article-inner">
    
    

      <header class="article-header">

        
  
    <h1 itemprop="name">
      <a class="article-title" href="/mysql-python安装时提示mysql_config not fount/">
        <i class="fa fa-pencil-square-o  article-title-icon"></i>mysql-python安装时mysql_config not found</a>
    </h1>
  



      </header>
    
    <div class="article-entry" itemprop="articleBody">
      

        <br>
        <span id="busuanzi_container_page_pv">
          阅读次数<span id="busuanzi_value_page_pv"></span>
        </span>
        <ul>
<li>目录<br>{:toc}</li>
</ul>
<h2 id="0x00-描述"><a href="#0x00-描述" class="headerlink" title="0x00 描述"></a>0x00 描述</h2><p>mysql-python安装时提示mysql_config not found<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># pip install MySQL-<span class="keyword">python</span></span><br><span class="line">Collecting MySQL-<span class="keyword">python</span></span><br><span class="line">  Using cached http<span class="variable">s:</span>//<span class="keyword">files</span>.pythonhosted.org/packages/a5/e9/<span class="number">51</span>b544da85a36a68debe7a7091f068d802fc515a3a202652828c73453cad/MySQL-<span class="keyword">python</span>-<span class="number">1.2</span>.<span class="number">5</span>.zip</span><br><span class="line">    Complete output from <span class="keyword">command</span> <span class="keyword">python</span> setup.<span class="keyword">py</span> egg_info:</span><br><span class="line">    <span class="keyword">sh</span>: <span class="number">1</span>: mysql_confi<span class="variable">g:</span> not found</span><br><span class="line">    Traceback (most recent <span class="keyword">call</span> <span class="keyword">last</span>):</span><br><span class="line">      File <span class="string">"&lt;string&gt;"</span>, <span class="built_in">line</span> <span class="number">1</span>, in <span class="symbol">&lt;module&gt;</span></span><br><span class="line">      File <span class="string">"/tmp/pip-build-QORDfG/MySQL-python/setup.py"</span>, <span class="built_in">line</span> <span class="number">17</span>, in <span class="symbol">&lt;module&gt;</span></span><br><span class="line">        metadata, <span class="keyword">options</span> = get_config()</span><br><span class="line">      File <span class="string">"setup_posix.py"</span>, <span class="built_in">line</span> <span class="number">43</span>, in get_config</span><br><span class="line">        libs = mysql_config(<span class="string">"libs_r"</span>)</span><br><span class="line">      File <span class="string">"setup_posix.py"</span>, <span class="built_in">line</span> <span class="number">25</span>, in mysql_config</span><br><span class="line">        raise EnvironmentError(<span class="string">"%s not found"</span> % (mysql_config.path,))</span><br><span class="line">    EnvironmentError: mysql_config not found</span><br></pre></td></tr></table></figure></p>
<h2 id="0x01-解决方法"><a href="#0x01-解决方法" class="headerlink" title="0x01 解决方法"></a>0x01 解决方法</h2><p>报错的原因是没有安装<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">centos 7</span><br><span class="line">yum <span class="keyword">install</span> mysql-devel</span><br><span class="line">ubuntu</span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> libmysqlclient-dev</span><br></pre></td></tr></table></figure></p>
<p>再执行pip install MySQL-python 安装成功</p>

      

    </div>





    <footer class="article-footer">
      
        <a data-url="http://www.pa55w0rd.club/mysql-python安装时提示mysql_config not fount/" data-id="cjop6cq7c000cntt6jwpa08j2" class="article-share-link" data-share="baidu" data-title="mysql-python安装时mysql_config not found">分享到</a>
      

      
        <a href="http://www.pa55w0rd.club/mysql-python安装时提示mysql_config not fount/#gitalk-container" class="article-comment-link">评论</a>
      

      

    </footer>
  </div>
  
</article>
<!--
<div class="share-component" data-disabled="" data-description="Share.js - 一键分享到微博，QQ空间，腾讯微博，人人，豆瓣">一键分享</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
-->







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/5/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/7/">Next &raquo;</a>
    </nav>
  

</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">

    <h3 class="widget-title" data-scroll-reveal="enter top and over 0.7s"><i class="fa fa-file-text-o"></i>近期文章</h3>
    <div class="widget">
      <ul>
        
          <li onclick="javascript:document.getElementById('recentpost_item').click();">
            <a id="recentpost_item" href="/jekyll迁移hexo/">jekyll迁移hexo</a>
          </li>
        
          <li onclick="javascript:document.getElementById('recentpost_item').click();">
            <a id="recentpost_item" href="/lynis/">Lynis</a>
          </li>
        
          <li onclick="javascript:document.getElementById('recentpost_item').click();">
            <a id="recentpost_item" href="/git_edit_remoteurl/">Git修改远程URL</a>
          </li>
        
          <li onclick="javascript:document.getElementById('recentpost_item').click();">
            <a id="recentpost_item" href="/linux_firefox_error/">Centos 7 运行firefox出错</a>
          </li>
        
          <li onclick="javascript:document.getElementById('recentpost_item').click();">
            <a id="recentpost_item" href="/mongodb_auth/">mongodb开启认证</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title" data-scroll-reveal="enter top and over 0.7s"><i class="fa fa-tasks"></i>分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/note/">note</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web安全/">web安全</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/企业安全/">企业安全</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/安全建设/">安全建设</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/开发安全/">开发安全</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/移动安全/">移动安全</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>


  <script>
  $(document).on("click", "ul.category-list li.category-list-item", function () {
    window.location.href = $(this).find('a').attr('href')
  })
  </script>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title" data-scroll-reveal="enter top and over 0.7s"><i class="fa fa-cloud"></i>标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/note/" style="font-size: 10px;">note</a>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title" data-scroll-reveal="enter top and over 0.7s"><i class="fa fa-archive"></i>归档</h3>
    <div class="widget">
      <!-- <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">25</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">1</span></li></ul> -->
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">2018年11月</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">2018年10月</a><span class="archive-list-count">25</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">2018年09月</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">2018年01月</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


<script>
$(document).on("click", "ul.archive-list li.archive-list-item", function () {
  window.location.href = $(this).find('a').attr('href')
})
</script>

  
    
  <style>
  *{ margin: 0; padding: 0;}
  .tooltips{ border-width: 1px; border-style: solid; position: absolute; display: none; border-radius: 3px; opacity: 0; filter:alpha( opacity = 0) ; z-index: 999;}
  .tooltips p.content{ padding: 5px; }
  .tooltips .triangle-front,.tooltips .triangle-back{ width: 0; height: 0; overflow: hidden; border-width: 8px; border-style: solid; position: absolute; border-color: transparent ; top: 100%; left: 50%; margin-left: -8px;}
  .tooltips .triangle-back{ margin-top: -1px;}

  .toolTipInfo{ border-color: #000; background-color: #EEEEEE;}
  .toolTipInfo .triangle-front{ border-top-color: #EEEEEE;}
  .toolTipInfo .triangle-back{ border-top-color: #EEEEEE;}


  .icoSize{font-size: 2em}
  </style>



  <div class="widget-wrap">
    <h3 class="widget-title" data-scroll-reveal="enter top and over 0.7s"><i class="fa fa-link"></i>链接</h3>
    <div class="widget" style="z-index: 1;">





      <!-- <ul> -->
        
          <!-- <li> -->
          

          

                  <a id="github-alt-icon-color" class="weight-icon-link" target="_blank" href="https://github.com/Pa55w0rd">
                      <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-github-alt fa-stack-1x fa-inverse"></i>
                      </span>
                  </a>
          

          

          

          

          

          

          


          

          


          <!-- </li> -->
        
          <!-- <li> -->
          

          

          

          

          

          

          

          


          
                  <a id="envelope-o-icon-color" class="weight-icon-link" target="_blank" href="mailto:pa55w0rd@aliyun.com" data-toggle="tooltip" data-placement="top" title="请多多交流！">
                  <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-envelope-o  fa-stack-1x fa-inverse"></i>
                      </span>
                  </a>
          

          


          <!-- </li> -->
        
      <!-- </ul> -->
    </div>
  </div>


  <script>
  $.fn.extend({
    hoverTips : function (){
      var self = $(this);
      var sw = self.get(0).switch;
      if( !sw ) {
        sw = true;
        var content = self.attr("tooltips");
        var htmlDom = $("<div class='tooltips'>")
            .addClass("toolTipInfo")
            .html("<p class='content'></p>"
                + "<p class='triangle-front'></p>"
                + "<p class='triangle-back'></p>");
        htmlDom.find("p.content").html( content );
      }
      self.on("mouseover",function(){
        $("body").append( htmlDom );
        var left = self.offset().left - htmlDom.outerWidth()/2 + self.outerWidth()/2;
        var top = self.offset().top - htmlDom.outerHeight() - parseInt(htmlDom.find(".triangle-front").css("border-width"));
        htmlDom.css({"left":left,"top":top - 10,"display":"block"});
        htmlDom.stop().animate({ "top" : top ,"opacity" : 1},300);
      });
      self.on("mouseout",function(){
        var top = parseInt(htmlDom.css("top"));
        htmlDom.stop().animate({ "top" : top - 10 ,"opacity" : 0},300,function(){
          htmlDom.remove();
          sw = false;
        });
      });
    },

  });

  $("#weixin-icon-color").hoverTips();
  $("#qq-icon-color").hoverTips();
  </script>



  
    
    <div class="widget-wrap">
  
      <h3 class="widget-title" data-scroll-reveal="enter top and over 0.7s"><i class="fa fa-group"></i>友链</h3>
      <div class="widget">
        <ul>
        
            <li onclick="javascript:document.getElementById('friend_links_item').click();">
              <a id="friend_links_item" href="https://firexun.github.io/"><i class="fa  fa-arrow-circle-right" style="margin-right:7px"></i>青衫磊落</a>
            </li>

        
        </ul>
      </div>
    </div>
  
  
  
</aside>

      
    </div>
    <footer id="footer">
  
  <div data-scroll-reveal="enter bottom" class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Pa55w0rd<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/HipHopCoderS/Landscape-x" target="_blank">Landscape-x</a>
    </div>

    <div id="footer-info" class="inner">
      <!-- id 将作为查询条件 
      <span id="<Your/Path/Name>" class="leancloud-visitors" data-flag-title="Your Article Title">
        <em class="post-meta-item-text">阅读量 </em>
        <i class="leancloud-visitors-count">1000000</i>
      </span>
-->
      <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1257415698'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1257415698%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>

    </div>
  </div>

</footer>

  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link"><i class="fa fa-home" aria-hidden="true"></i>首页</a>
  
    <a href="/archives" class="mobile-nav-link"><i class="fa fa-archive" aria-hidden="true"></i>归档</a>
  
    <a href="/about.html" class="mobile-nav-link"><i class="fa fa-user" aria-hidden="true"></i>关于我</a>
  
</nav>

  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/betop.png"></a>
</div>

<!-- totop end -->



  <script>
    const gitalk = new Gitalk({
      clientID: "992fba235eb173826494",
      clientSecret: "d133f6427763be2cf4048e4d146a22043e745f22",
      repo: "www.pa55w0rd.club",
      owner: "Pa55w0rd",
      admin: "Pa55w0rd",
      // id: location.pathname,      // Ensure uniqueness and length less than 50
      id: "",      // Ensure uniqueness and length less than 50
      distractionFreeMode: false  // Facebook-like distraction free mode
    })
    gitalk.render('gitalk-container')
  </script>




<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- 百度分享 end -->

<!-- <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> -->
<script src="//cdn.bootcss.com/jquery/3.0.0-beta1/jquery.min.js"></script>



  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>



<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
                processEscapes: true
                    
}
  
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
                  
}
    
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                            all[i].SourceElement().parentNode.className += ' has-jax';
                                    
            }
                
        });
</script>

<script type="text/javascript" src="http://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<script src="/js/script.js"></script>


</div>
</body>
</html>



<div class="site-search">
  <div class="algolia-popup popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>
    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>
</div>


<script>
$(document).ready(function(){
window.scrollReveal = new scrollReveal({ reset: true});
//
})
</script>
